{% extends "root.html" %}

{% block title %}
BHMS Report of New Tallah ROB (Hemanta Setu) &nbsp; Summery Report &nbsp; &nbsp; From {{start_date}} to {{end_date}}
{% endblock %}

{% block styles %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
{% endblock %}

{% block content %}
<main id="report-print">
    <div class="container" style="max-width: 595pt !important;">
        <div class="header-text text-center">
            <p class="text-center my-5">
                <u>
                    BHMS Report of New Tallah ROB (Hemanta Setu) &nbsp; Summery Report &nbsp; &nbsp; From {{start_date}}
                    to {{end_date}}
                </u>
            </p>
            <h4>New Tallah ROB (Hemanta Setu)</h4>
            <h5>Weekly Report on the Bridge Health Monitoring System</h5>
            <p class="fw-bold">Reporting period: From {{start_date}} to {{end_date}}</p>
            <p class="fw-bold">(Time: {{start_time}} to {{end_time}})</p>
        </div>
        <!-- ======= START  Instrumentation health status ======= -->
        <button id="download-pdf" class="btn btn-primary d-print-none" onclick="toPDF()">Download PDF</button>
        <h5 class="my-3 mt-5 text-primary">A. Instrumentation health status</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th style="width: 10px;">SL.no</th>
                        <th>Name of instrument</th>
                        <th>Total qty.installed</th>
                        <th>Functioning</th>
                        <th>Damaged/vandalized</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Accelerometer</td>
                        <td>34</td>
                        <td>34</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Laser sensor</td>
                        <td>32</td>
                        <td>32</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Corrosion sensor</td>
                        <td>2</td>
                        <td>2</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Automatic weather station</td>
                        <td>1</td>
                        <td>1</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Strain gauges</td>
                        <td>213</td>
                        <td>213</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>LVDT</td>
                        <td>64</td>
                        <td>64</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Tilt Meter</td>
                        <td>2</td>
                        <td>2</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Temperature Meter</td>
                        <td>2</td>
                        <td>2</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- ======= END  Instrumentation health status ======= -->
        <!-- ======= START Weather conditions Summary during the reporting period ======= -->
        <h5 class="my-5 text-primary">B. Weather conditions Summary during the reporting period</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Weather Parameter</th>
                        <th>Maximum</th>
                        <th>Minimum</th>
                        <th>Average</th>
                        <th>Standard Deviation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for _, row in weather_datas.iterrows() %}
                    <tr>
                        <td>{{ row['Weather Parameter'] }}</td>
                        <td>{{ row['Maximum'] | round(1) }}</td>
                        <td>{{ row['Minimum'] | round(1) }}</td>
                        <td>{{ row['Average'] | round(1) }}</td>
                        <td>{{ row['Standard Deviation'] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- ======= START Obserbation Section ======= -->
        <div class="Observations-section">
            <h5>
                <u>Observations:</u>
            </h5>
            <ul>
                <li>
                    Maximum of solar radiation was observed on 10:45 am morning of 23rd
                    April
                </li>
                <li>2023.Wind direction in an average it was 230.1 degrees to north</li>
                <li>Average Relative humidity for this period was 56.5 %RH</li>
                <li>The average atmospheric temperature was 33.0 °C.</li>
                <li>
                    The maximum recorded wind speed is at 09:45 pm night of 21 st April,
                    2023 and which was 64.8 km/h.
                </li>
            </ul>
        </div>
        <!-- ======= END Obserbation Section ======= -->

        <!-- ======= END Weather conditions Summary during the reporting period ======= -->

        <!-- ======= START Table showing the locations and Tag of Laser Sensor ======= -->
        <div class="table-responsive">
            <h5 class="my-3 text-primary">C. Table showing the locations and Tag of Laser Sensor</h5>
            <table class="table table-bordered table-striped p-0">
                <thead class="text-center">
                    <tr>
                        <th style="width: 80px;">SL No.</th>
                        <th>Laser Sensor</th>
                        <th>Location</th>
                        <th style="width: 80px;">SL No.</th>
                        <th>Laser Sensor</th>
                        <th>Location</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>LS1</td>
                        <td>A1 Approach</td>
                        <td>18</td>
                        <td>LS18</td>
                        <td>P9-CP2 LHS</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>LS2</td>
                        <td>A1-P1</td>
                        <td>19</td>
                        <td>LS19</td>
                        <td>CP2-P10 RHS</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>LS3</td>
                        <td>P1-P2</td>
                        <td>20</td>
                        <td>LS20</td>
                        <td>CP2-P10 LHS</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>LS4</td>
                        <td>P2-P3</td>
                        <td>21</td>
                        <td>LS21</td>
                        <td>P10-P11</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>LS5</td>
                        <td>P3-P4</td>
                        <td>22</td>
                        <td>LS22</td>
                        <td>P11-P12</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>LS6</td>
                        <td>P4-P5</td>
                        <td>23</td>
                        <td>LS23</td>
                        <td>P12-P13</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>LS7</td>
                        <td>P5-CP1 RHS</td>
                        <td>24</td>
                        <td>LS24</td>
                        <td>P13-P14</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>LS8</td>
                        <td>P5-CP1 LHS</td>
                        <td>25</td>
                        <td>LS25</td>
                        <td>P14-A2 Steel</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>LS9</td>
                        <td>CP1-P6 RHS</td>
                        <td>26</td>
                        <td>LS26</td>
                        <td>A2 Approach</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>LS10</td>
                        <td>CP1-P6 LHS</td>
                        <td>27</td>
                        <td>LS27</td>
                        <td>A3 Approach</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>LS11</td>
                        <td>P6-P7 RHS</td>
                        <td>28</td>
                        <td>LS28</td>
                        <td>A3 Approach</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>LS12</td>
                        <td>P6-P7 LHS</td>
                        <td>29</td>
                        <td>LS29</td>
                        <td>P20-P21</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td>LS13</td>
                        <td>P7-P8 RHS</td>
                        <td>30</td>
                        <td>LS30</td>
                        <td>P19-P20</td>
                    </tr>
                    <tr>
                        <td>14</td>
                        <td>LS14</td>
                        <td>P7-P8 LHS</td>
                        <td>31</td>
                        <td>LS31</td>
                        <td>P18-P19</td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td>LS15</td>
                        <td>P8-P9 RHS</td>
                        <td>32</td>
                        <td>LS32</td>
                        <td>P17-P18(Not Installed)</td>
                    </tr>
                    <tr>
                        <td>16</td>
                        <td>LS16</td>
                        <td>P8-P9 LHS</td>
                        <td>33</td>
                        <td>LS33</td>
                        <td>P16-P17</td>
                    </tr>
                    <tr>
                        <td>17</td>
                        <td>LS17</td>
                        <td>P9-CP2 RHS</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- LASER CHART -->
        <div class="container">
            <div id="laser-chart-container"></div>
            <script>
                // Loop through each chart data in the 'laser_charts_data' array
                const laserChartsData = {{ laser_charts_data | safe }};
            </script>
            <script>
                // Function to extract deflection and threshold values
                function extractDeflectionAndThresholdData(laserChartsData) {
                    const result = [];

                    for (const chartData of laserChartsData) {
                        const { deflection_data, threshold_data } = Object.values(chartData)[0][0];
                        result.push({ deflection_data, threshold_data });
                    }

                    return result;
                }

                // Access the container where the charts will be displayed
                const chartContainer = document.getElementById('laser-chart-container');

                laserChartsData.forEach((chartData, index) => {
                    const chartId = chartData.chart_id;
                    const chartTitle = chartData.chart_title;
                    const chart_label_id = "ls" + (index+1);
                    const laser_chart_labels = chartData[chart_label_id][0]['labels'];


                    // Extract deflection and threshold data for each chart
                    const { deflection_data, threshold_data } = extractDeflectionAndThresholdData([chartData])[0];

                    // Create a canvas element for the current chart
                    const canvasElement = document.createElement('canvas');
                    canvasElement.id = chartId;
                    canvasElement.style.width = '100%';
                    canvasElement.style.height = '60vh';

                    // Append the canvas element to the chart container
                    chartContainer.appendChild(canvasElement);

                    // Get the context for the current chart
                    const ctx = canvasElement.getContext('2d');

                    const myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: laser_chart_labels,
                            datasets: [
                                {
                                    data: deflection_data,
                                    label: "Deflection Data",
                                    borderColor: "blue",
                                    fill: false
                                }, {
                                    data: threshold_data,
                                    label: "Threshold Data",
                                    borderColor: "red",
                                    fill: false
                                }
                            ]
                        },

                        options: {
                            plugins: {
                                title: {
                                    display: true,
                                    text: chartTitle,
                                    color: 'navy',
                                    position: 'bottom',
                                    align: 'center',
                                    font: {
                                        weight: 'bold'
                                    },
                                    padding: 8,
                                    fullSize: true,
                                }
                            }
                        }
                    });

                });
            </script>
        </div>
        <!-- ======= END Table showing the locations and Tag of Laser Sensor ======= -->

        <!-- ======= START Summary of Laser Sensor. ======= -->
        <h5 class="my-5 text-primary">D. Summary of Laser Sensor.</h5>
        <div class="table-responsive pagebreak">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Location</th>
                        <th>Parameter</th>
                        <th>Max</th>
                        <th>Min.</th>
                        <th>Avg.</th>
                        <th>Standard Deviation</th>
                        <th>Threshold Value in mm (+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for column, values in laser_datas[0].items() %}
                    {% if loop.index % 2 == 1 %}
                    <tr>
                        <td rowspan="2">{{ column }}</td>
                        <td>Vertical Distance in mm</td>
                        <td>{{ values["Max"] }}</td>
                        <td>{{ values["Min"] }}</td>
                        <td>{{ values["Avg"] }}</td>
                        <td>{{ values["Std"] }}</td>
                        <td rowspan="2">{{ values["Threshold"] }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td>Deflection in mm</td>
                        <td>{{ values["Max"] | round(1) }}</td>
                        <td>{{ values["Min"] | round(1) }}</td>
                        <td>{{ values["Avg"] | round(1) }}</td>
                        <td>{{ values["Std"] | round(1) }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- ======= START Obserbation Section ======= -->
        <div class="Observations-section">
            <h5>
                <u>Observations:</u>
            </h5>
            <p>
                No significant deflection was observed on this monitoring period. The trend portrays the condition of
                traffic on the bridge. In case of Laser sensor LS 27 the laser sensor that is installed on P21 A3 span
                in it’s target some garbage had got stagnant there.
            </p>
        </div>
        <!-- ======= END Obserbation Section ======= -->
        <!-- ======= END Summary of Laser Sensor ======= -->

        <!-- ======= START Table showing the locations and Tag of Accelerometers ======= -->
        <div class="table-responsive">
            <h5 class="my-3 text-primary">F. Table showing the locations and Tag of Accelerometers.</h5>
            <table class="table table-bordered table-striped p-0">
                <thead class="text-center">
                    <tr>
                        <th style="width: 80px;">SL No.</th>
                        <th>Accelerometer</th>
                        <th>Location</th>
                        <th style="width: 80px;">SL No.</th>
                        <th>Accelerometer</th>
                        <th>Location</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>ACC1</td>
                        <td>A1 -P1 RHS</td>
                        <td>18</td>
                        <td>ACC18</td>
                        <td>P14-A2 LHS</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>ACC2</td>
                        <td>A1 -P1 LHS</td>
                        <td>19</td>
                        <td>ACC19</td>
                        <td>A3-P21 RHS</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>ACC3</td>
                        <td>P1-P2</td>
                        <td>20</td>
                        <td>ACC20</td>
                        <td>A3-P21 LHS</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>ACC4</td>
                        <td>P2-P3</td>
                        <td>21</td>
                        <td>ACC21</td>
                        <td>P21-P20</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>ACC5</td>
                        <td>P3-P4</td>
                        <td>22</td>
                        <td>ACC22</td>
                        <td>P20-P19</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>ACC6</td>
                        <td>P4-P5</td>
                        <td>23</td>
                        <td>ACC23</td>
                        <td>P19-P18</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>ACC7</td>
                        <td>P5-CP1</td>
                        <td>24</td>
                        <td>ACC24</td>
                        <td>P18-P17</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>ACC8</td>
                        <td>CP1-P6 RHS</td>
                        <td>25</td>
                        <td>ACC25</td>
                        <td>P17-P16</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>ACC9</td>
                        <td>CP1-P6 LHS</td>
                        <td>26</td>
                        <td>3DACC1</td>
                        <td>A1 Approach</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>ACC10</td>
                        <td>P8-P9 RHS</td>
                        <td>27</td>
                        <td>3DACC2</td>
                        <td>P6-P7 RHS</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>ACC11</td>
                        <td>P8-P9 LHS</td>
                        <td>28</td>
                        <td>3DACC3</td>
                        <td>P6-P7 LHS</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>ACC12</td>
                        <td>CP2-P10 </td>
                        <td>29</td>
                        <td>3DACC4</td>
                        <td>P7-P8 RHS</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td>ACC13</td>
                        <td>P10-P11</td>
                        <td>30</td>
                        <td>3DACC5</td>
                        <td>P7-P8 LHS</td>
                    </tr>
                    <tr>
                        <td>14</td>
                        <td>ACC14</td>
                        <td>P11-P12</td>
                        <td>31</td>
                        <td>3DACC6</td>
                        <td>P9-CP2 RHS</td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td>ACC15</td>
                        <td>P12-P13</td>
                        <td>32</td>
                        <td>3DACC7</td>
                        <td>P9-CP LHS</td>
                    </tr>
                    <tr>
                        <td>16</td>
                        <td>ACC16</td>
                        <td>P13-P14</td>
                        <td>33</td>
                        <td>3DACC8</td>
                        <td>A2 Approach</td>
                    </tr>
                    <tr>
                        <td>17</td>
                        <td>ACC17</td>
                        <td>P14-A2 RHS</td>
                        <td>34</td>
                        <td>A3 Approach</td>
                    </tr>
                </tbody>
            </table>

            <h4 class="bg-info text-center">Enclosed: Raw data files of Accelerometers are attached herewith.</h4>
        </div>
        <!-- ======= END Table showing the locations and Tag of Accelerometers ======= -->


        <!-- ======= START Graphical representation of Accelerometers ======= -->
        <div class="my-3">
            <h5 class="text-primary">
                G. Graphical representation of Accelerometers.
            </h5>

            <!-- ACCELEROMETER CHARTS -->
            <div class="container">
                {% for chart_data in accelerometers_charts_data %}
                {% for chart in chart_data["charts"] %}
                <div class="container">
                    <h5>Accelerometer {{ chart["axis_column"] }}</h5>
                    <div id="{{ chart_data['canvas_id'] }}_{{ chart['axis'] | safe }}">
                        {{ chart['plotly_div'] | safe }}
                    </div>
                </div>
                {% endfor %}
                {% endfor %}
            </div>
        </div>
        <!-- ======= END Graphical representation of Accelerometers ======= -->


        <!-- ======= START STRAIN GAUGES DATA ======= -->
        <h5 class="my-5 text-primary">H. Summary of Strain gauges.</h5>
        <div class="table-responsive">
            <!-- Shayam bazar Viaduct RHS -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="4">Shayam bazar Viaduct RHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in shayam_bazar_viaduct_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- Shayam bazar Viaduct LHS -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="4">Shayam bazar Viaduct LHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in shayam_bazar_viaduct_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P6-P7 LHS - BS1 -->
            <table class="table table-bordered table-striped pagebreak">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P6-P7 LHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-1</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS1_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P6-P7 LHS - BS3 -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P6-P7 LHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-3</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS3_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P6-P7 LHS - BS3 -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P9-CP2 LHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-3</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS5_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P6-P7 RHS - BS2 -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P6-P7 RHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-2</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS2_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P7-P8 RHS - BS4 -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P6-P7 RHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-4</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS4_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- P9-CP2 RHS - BS6 -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="3" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P9-CP2 RHS</th>
                    </tr>
                    <tr>
                        <th colspan="6">BS-6</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P6_P7_BS6_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- Dunlop Viaduct LHS -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">Dunlop Viaduct LHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in dunlop_Viaduct_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- Dunlop Viaduct RHS -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">Dunlop Viaduct RHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in dunlop_Viaduct_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>374.5</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- P7-P8 RHS (additional as suggested by IIT) -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">P7-P8 RHS (additional as suggested by IIT)</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                        <th>TH.(µε+/-)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in P7_P8_BS4_additional_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                        <td>433.7</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Chitpur Viaduct RHS  -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">Chitpur Viaduct LHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in chitpur_viaduct_LHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Chitpur Viaduct LHS  -->
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th rowspan="2" style="width: 10px;">Sl.No</th>
                        <th>Location</th>
                        <th colspan="5">Chitpur Viaduct RHS</th>
                    </tr>
                    <tr>
                        <th>Instrument Tag No.</th>
                        <th>MAX.</th>
                        <th>MIN.</th>
                        <th>AVG.</th>
                        <th>SD.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in chitpur_viaduct_RHS_statistics_datas.iterrows() %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ row["Instrument Tag No."] }}</td>
                        <td>{{ row["MAX."] | round(1) }}</td>
                        <td>{{ row["MIN."] | round(1) }}</td>
                        <td>{{ row["AVG."] | round(1) }}</td>
                        <td>{{ row["SD."] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- STRAIN CHARTS -->
        <div class="container">
            {% for strain_plotly_div in strain_plotly_divs %}
            <div class="container">
                <h3>{{ strain_plotly_div["chart_title"] }}</h3>
                <p>Chart for: {{ strain_plotly_div["chart_for"] }}</p>
                <p>Data Logger: {{ strain_plotly_div["dl_name"] }}</p>

                <div id="{{ strain_plotly_div['canvas_id'] | safe }}">
                    {{ strain_plotly_div['plotly_div'] | safe }}
                </div>
            </div>
            {% endfor %}
        </div>
        <!-- ======= END STRAIN GAUGES DATA ======= -->


        <!-- ======= START Analyze Temperature Meter ======= -->
        <h5 class="my-5 text-primary">I. Summary of Temperature Meter</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Sensor's Tag.</th>
                        <th>Maximum</th>
                        <th>Minimum</th>
                        <th>Average</th>
                        <th>Standard Deviation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in temprature_meter_datas.iterrows() %}
                    <tr>
                        <td>{{ row["Sensor's Tag."] }}</td>
                        <td>{{ row["Maximum"] | round(1) }}</td>
                        <td>{{ row["Minimum"] | round(1) }}</td>
                        <td>{{ row["Average"] | round(1) }}</td>
                        <td>{{ row["Standard Deviation"] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- TEMPERATURE CHARTS -->
        <div class="container">
            {% for temperature_plotly_div in temperature_plotly_divs %}
            <div class="container">
                {{ temperature_plotly_div | safe }}
            </div>
            {% endfor %}
        </div>
        <!-- ======= END Analyze Temperature Meter ======= -->


        <!-- ======= START TILT SENSOR DATA ======= -->
        <h5 class="my-5 text-primary">K. Summary of Tilt Meter</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Sensor's Tag.</th>
                        <th>Maximum</th>
                        <th>Minimum</th>
                        <th>Average</th>
                        <th>Standard Deviation</th>
                        <th>TH</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in tilt_meter_datas.iterrows() %}
                    <tr>
                        <td>{{ row["Sensor's Tag."] }}</td>
                        <td>{{ row["Maximum"] | round(1) }}</td>
                        <td>{{ row["Minimum"] | round(1) }}</td>
                        <td>{{ row["Average"] | round(1) }}</td>
                        <td>{{ row["Standard Deviation"] | round(1) }}</td>
                        <td>1.0</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- ======= END TILT SENSOR DATA ======= -->


        <!-- ======= START LVDT =======  -->
        <h5 class="my-4 text-primary">L. Summary of LVDT</h5>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Sensor's Tag.</th>
                        <th>MAX. (deg C)</th>
                        <th>MIN. (deg C)</th>
                        <th>AVG. (deg C)</th>
                        <th>SD. (deg C)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in ldvt_datas.iterrows() %}
                    <tr>
                        <td>{{ row["Sensor's Tag."] }}</td>
                        <td>{{ row["MAX. (deg C)"] | round(1) }}</td>
                        <td>{{ row["MIN. (deg C)"] | round(1) }}</td>
                        <td>{{ row["AVG. (deg C)"] | round(1) }}</td>
                        <td>{{ row["SD. (deg C)"] | round(1) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- LVDT CHARTS -->
        <div class="container">
            <div id="lvdt-chart-container"></div>
            <script>
                const lvdt_chart_data = {{ ldvt_charts_data | safe }};

                lvdt_chart_data.forEach((csv_charts_data) => {
                    // console.log(csv_charts_data);
                    const chartContainer = document.getElementById('lvdt-chart-container');
                    const dlName = csv_charts_data[0]['dl_name'];

                    // const h2Element = document.createElement('h2');
                    // h2Element.textContent = `Charts for ${dlName}`;
                    // chartContainer.appendChild(h2Element);

                    csv_charts_data.forEach((chart_data, index) => {
                        const dlName = chart_data['dl_name'];
                        const canvasId = `chartCanvas${index}`+ chart_data['chart_title'];
                        // const h3Element = document.createElement('h3');
                        // h3Element.textContent = dlName;

                        const canvasElement = document.createElement('canvas');
                        canvasElement.id = canvasId;
                        canvasElement.style.width = '100%';
                        canvasElement.style.height = '60vh';

                        // chartContainer.appendChild(h3Element);
                        chartContainer.appendChild(canvasElement);


                        const labels = chart_data['labels'];
                        const datasets = chart_data['datasets'];

                        createChart(canvasId, labels, datasets);
                    });
                });

                function createChart(canvasId, labels, datasets) {
                    const ctx = document.getElementById(canvasId).getContext('2d');
                    new Chart(ctx, {
                        type: 'line', // Change this to the desired chart type (e.g., 'bar', 'pie', etc.)
                        data: {
                            labels: labels,
                            datasets: datasets
                        },
                        options: {
                            plugins: {
                                title: {
                                    display: true,
                                    text: "",
                                    color: 'navy',
                                    position: 'bottom',
                                    align: 'center',
                                    font: {
                                        weight: 'bold'
                                    },
                                    padding: 8,
                                    fullSize: true,
                                }
                            }
                        }
                    });
                }
            </script>
        </div>
        <!-- ======= END LVDT =======  -->
    


        <!-- ======= START Corrision =======  -->
        <h5 class="my-4 text-primary">L. Summary of Corrision</h5>
        <div class="table-container">
            <table class="table table-bordered table-striped">
                <thead class="text-center">
                    <tr>
                        <th>Datetime</th>
                        <th>N01 Corrosion Current 1</th>
                        <th>N01 Corrosion Current 2</th>
                        <th>N01 Corrosion Current 3</th>
                        <th>N01 Corrosion Current 4</th>
                        <th>N02 Corrosion Current 1</th>
                        <th>N02 Corrosion Current 2</th>
                        <th>N02 Corrosion Current 3</th>
                        <th>N02 Corrosion Current 4</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in corrosion_data %}
                    <tr>
                        <td>{{ row['DateTime']  }}</td>
                        <td>{{ row['N01_Corrosion_Current_1'] }}</td>
                        <td>{{ row['N01_Corrosion_Current_2'] }}</td>
                        <td>{{ row['N01_Corrosion_Current_3'] }}</td>
                        <td>{{ row['N01_Corrosion_Current_4'] }}</td>
                        <td>{{ row['N02_Corrosion_Current_1'] }}</td>
                        <td>{{ row['N02_Corrosion_Current_2'] }}</td>
                        <td>{{ row['N02_Corrosion_Current_3'] }}</td>
                        <td>{{ row['N02_Corrosion_Current_4'] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <h5 class="my-4 text-primary">
            P. Summary of Corrosion.
        </h5>
        <p>
            Some maintenance work was carried out on a workstation of control room; therefore, some data of accelerometers & Laser sensors were missed.The changes recorded by strain gauges are negligible, in some of the cases the spikes define the running load of traffic.
        </p>
        <p>
            In case of Laser sensors and accelerometers they portray the condition of traffic on the bridge. In case of some laser sensors the targets maybe disturbed by the local people.
        </p>
        <p>
            The corrosion monitoring system records a negligible value.
        </p>
        <p>
            DL1 can record and upload the data on 30 minutes interval only.
        </p>
        <!-- ====== END Corrision ========  -->
    </div>

</main>
{% endblock %}
{% block scripts %}
<!-- <script>
    document.addEventListener('DOMContentLoaded', () => {
        const downloadbtn = document.querySelector('#download-pdf');
        downloadbtn.addEventListener('click', () => {

            // Execute the printJS function once the font is loaded
            printJS({
                printable: 'report-print',
                type: 'html',
                css: '{{ url_for("static", filename="css/bootstrap.css") }}'
            });
        })
    })
</script> -->

<script>
function toPDF () {
    html2pdf()
    // (C1) SET OPTIONS
    .set({
        // margin: 1,
        filename: "drishti-data-analyze-automation-report.pdf",
        enableLinks : true,
        jsPDF: { format: "A4", orientation: "portrait" },
        pagebreak: { before: '.pagebreak', mode: ['avoid-all', 'css', 'legacy'] }
    })

    // (C2) GET CONTENT FROM SECTION
    .from(document.getElementById('report-print'))

    // (C3) SAVE TO FILE
    .save();
}
</script>
{% endblock %}